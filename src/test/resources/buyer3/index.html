<script>
function randomVector(n) {
  const vector = new Array(n);
  for (let i = 0; i < n; i++) {
    vector[i] = Math.random();
  }
  return vector;
}

function randomMatrix(n, m) {
  const matrix = new Array(n);
  for (let i = 0; i < n; i++) {
    matrix[i] = randomVector(m);
  }
  return matrix;
}

if (!navigator.joinAdInterestGroup) {
  document.write("your browser doesn't have joinAdInterestGroup -- do you need to set some flags?");
} else {
  navigator.joinAdInterestGroup({
    owner: "https://fledge-tests.creativecdn.net:9001",
    name: "tc-ig",
    biddingLogicUrl: "https://fledge-tests.creativecdn.net:9001/buyer.js",
    userBiddingSignals: {key: "user bidding signals "},
    ads: [
      {
        renderUrl: "https://fledge-tests.creativecdn.net:9001/ad.html",
        metadata: {
          bid: 1,
          X: randomMatrix(200, 1),
          A: randomMatrix(200, 200),
          B: randomMatrix(100, 200),
          C: randomMatrix(50, 100),
          D: randomMatrix(1, 50)
        },
      },
    ],
  }, 10000);
  document.write("joined interest group");
}
</script>
